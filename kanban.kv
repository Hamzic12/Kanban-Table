<app_layout>:
    orientation: 'horizontal'

    GridLayout:
        id: maingrid_id
        cols: 1
        rows: 3
        size: root.width * 0.8, root.height  # Adjusting size to leave space for the StackLayout on the right

        GridLayout:
            id: stage_id
            cols: 4
            Label: 
                text: "To Do"
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1  # Red
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label: 
                text: "In Progress"
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1  # Red
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label: 
                text: "Testing"
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1  # Red
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label: 
                text: "Done"
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1  # Red 
                    Rectangle:
                        pos: self.pos
                        size: self.size

        RelativeLayout:
            id: table_id
            Label:
                text: "TEXT"

        GridLayout:
            id: completionbar_id
            cols: 4

            Widget:
                canvas:
                    Color:
                        rgba: 0, root.q1, 0, 1  # Adjust color dynamically with root.q1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Widget:
                canvas:
                    Color:
                        rgba: 0, root.q2, 0, 1  # Adjust color dynamically with root.q2
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Widget:
                canvas:
                    Color:
                        rgba: 0, root.q3, 0, 1  # Adjust color dynamically with root.q3
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Widget:
                canvas:
                    Color:
                        rgba: 0, root.q4, 0, 1  # Adjust color dynamically with root.q4
                    Rectangle:
                        pos: self.pos
                        size: self.size

    StackLayout:
        size_hint_x: 0.2  # This makes the StackLayout take up 20% of the horizontal space
        orientation: 'lr-tb'  # Left to right, top to bottom
        Button:
            text: "Press me"
            height: 50
            on_press: root.press_me()
