<app_layout>:
    orientation: 'horizontal'

    GridLayout:  # the main grid 
        cols: 2
        size: root.width, root.height 

        GridLayout:  # grid of 3 parts, the whole table
            id: table_grid_id
            cols: 1
            rows: 3
            
            GridLayout:  # stages for the kanban table
                id: stage_id
                cols: 4
                size_hint_y: 0.2  # Takes 20% of the vertical space
                # Optionally adjust the height proportion based on parent size

                Label:
                    text: "To Do"
                    canvas.before:
                        Color:
                            rgba: 1, 0, 0, 1  # Red
                        Rectangle:
                            pos: self.pos
                            size: self.size

                Label:
                    text: "In Progress"
                    canvas.before:
                        Color:
                            rgba: 1, 0, 0, 1  # Red
                        Rectangle:
                            pos: self.pos
                            size: self.size

                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line: # Draw the left border
                            points: [self.x, self.y, self.x, self.y + self.height]
                            width: 2
                        Line: # Draw the right border
                            points: [self.x + self.width, self.y, self.x + self.width, self.y + self.height]
                            width: 2

                Label:
                    text: "Testing"
                    canvas.before:
                        Color:
                            rgba: 1, 0, 0, 1  # Red
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line: # Draw the right border
                            points: [self.x + self.width, self.y, self.x + self.width, self.y + self.height]
                            width: 2
                        Line: # Draw the left border
                            points: [self.x, self.y, self.x, self.y + self.height]
                            width: 2

                Label:
                    text: "Done"
                    canvas.before:
                        Color:
                            rgba: 1, 0, 0, 1  # Red 
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line: # Draw the right border
                            points: [self.x + self.width, self.y, self.x + self.width, self.y + self.height]
                            width: 2
                        Line: # Draw the left border
                            points: [self.x, self.y, self.x, self.y + self.height]
                            width: 2 

            RelativeLayout:  # place for tasks
                id: table_id

                Label:
                    text: "TEXT"

            GridLayout:  # bar showing process
                id: processbar_id
                cols: 45
                size_hint_y: 0.17  # Takes 30% of the vertical space

                Widget:
                    canvas:
                        Color:
                            rgba: 0, root.q1, 0, 1  # Adjust color dynamically with root.q1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line:
                            rectangle: (self.x, self.y, self.width, self.height)
                            width: 2 

                Widget:
                    canvas:
                        Color:
                            rgba: 0, root.q2, 0, 1  # Adjust color dynamically with root.q2
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line:
                            rectangle: (self.x, self.y, self.width, self.height)
                            width: 2 

                Widget:
                    canvas:
                        Color:
                            rgba: 0, root.q3, 0, 1  # Adjust color dynamically with root.q3
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line:
                            rectangle: (self.x, self.y, self.width, self.height)
                            width: 2 

                Widget:
                    canvas:
                        Color:
                            rgba: 0, root.q4, 0, 1  # Adjust color dynamically with root.q4
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line:
                            rectangle: (self.x, self.y, self.width, self.height)
                            width: 2 
                Widget:
                    canvas:
                        Color:
                            rgba: 0, root.q5, 0, 1  # Adjust color dynamically with root.q4
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 0, 0, 0, 1  # Border color (black)
                        Line:
                            rectangle: (self.x, self.y, self.width, self.height)
                            width: 2 

        StackLayout:  # user interface
            id: ui_id
            size_hint_x: 0.2  # This makes the StackLayout take up 20% of the horizontal space
            orientation: 'lr-tb'  # Left to right, top to bottom
            Button:
                text: "Press me"
                height: 50
                on_press: root.press_me()
